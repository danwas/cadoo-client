{"ast":null,"code":"import _regeneratorRuntime from\"/Users/daniel/Desktop/DH2465-cadoo/code/frontend/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/daniel/Desktop/DH2465-cadoo/code/frontend/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/daniel/Desktop/DH2465-cadoo/code/frontend/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useHistory}from\"react-router-dom\";import{AuthContext}from\"./libs/Auth\";// Navbar\nimport NavbarAuth from'./containers/NavbarAuth';import NavbarNotAuth from'./containers/NavbarNotAuth';// Routes\nimport Routes from\"./Routes\";// Styling\nimport\"./App.css\";function App(){var existingTokens=JSON.parse(localStorage.getItem(\"tokens\"));var _useState=useState(existingTokens),_useState2=_slicedToArray(_useState,2),authTokens=_useState2[0],setAuthTokens=_useState2[1];var history=useHistory();useEffect(function(){},[]);function handleLogout(){return _handleLogout.apply(this,arguments);}function _handleLogout(){_handleLogout=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setAuthTokens();localStorage.clear();history.push(\"/login\");case 3:case\"end\":return _context.stop();}}},_callee);}));return _handleLogout.apply(this,arguments);}var setTokens=function setTokens(data){localStorage.setItem(\"tokens\",JSON.stringify(data));setAuthTokens(data);};return/*#__PURE__*/React.createElement(\"div\",{className:\"App\"},authTokens?/*#__PURE__*/React.createElement(NavbarAuth,{handleLogout:handleLogout}):/*#__PURE__*/React.createElement(NavbarNotAuth,null),/*#__PURE__*/React.createElement(AuthContext.Provider,{value:{authTokens:authTokens,setAuthTokens:setTokens}},/*#__PURE__*/React.createElement(Routes,null)));}export default App;","map":{"version":3,"sources":["/Users/daniel/Desktop/DH2465-cadoo/code/frontend/client/src/App.js"],"names":["React","useState","useEffect","useHistory","AuthContext","NavbarAuth","NavbarNotAuth","Routes","App","existingTokens","JSON","parse","localStorage","getItem","authTokens","setAuthTokens","history","handleLogout","clear","push","setTokens","data","setItem","stringify"],"mappings":"ugBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,OAASC,WAAT,KAA4B,aAA5B,CAEA;AACA,MAAOC,CAAAA,UAAP,KAAuB,yBAAvB,CACA,MAAOC,CAAAA,aAAP,KAA0B,4BAA1B,CAEA;AACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,CAEA;AACA,MAAO,WAAP,CAGA,QAASC,CAAAA,GAAT,EAAe,CACb,GAAMC,CAAAA,cAAc,CAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,QAArB,CAAX,CAAvB,CADa,cAEuBZ,QAAQ,CAACQ,cAAD,CAF/B,wCAENK,UAFM,eAEMC,aAFN,eAGb,GAAMC,CAAAA,OAAO,CAAGb,UAAU,EAA1B,CAEAD,SAAS,CAAC,UAAM,CACf,CADQ,CACN,EADM,CAAT,CALa,QAQEe,CAAAA,YARF,8IAQb,mIACEF,aAAa,GACbH,YAAY,CAACM,KAAb,GACAF,OAAO,CAACG,IAAR,CAAa,QAAb,EAHF,sDARa,+CAcb,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACC,IAAD,CAAU,CAC1BT,YAAY,CAACU,OAAb,CAAqB,QAArB,CAA+BZ,IAAI,CAACa,SAAL,CAAeF,IAAf,CAA/B,EACAN,aAAa,CAACM,IAAD,CAAb,CACD,CAHD,CAKA,mBACE,2BAAK,SAAS,CAAC,KAAf,EACIP,UAAU,cAAG,oBAAC,UAAD,EAAY,YAAY,CAAEG,YAA1B,EAAH,cAA+C,oBAAC,aAAD,MAD7D,cAGE,oBAAC,WAAD,CAAa,QAAb,EAAsB,KAAK,CAAE,CAAEH,UAAU,CAAVA,UAAF,CAAcC,aAAa,CAAEK,SAA7B,CAA7B,eACE,oBAAC,MAAD,MADF,CAHF,CADF,CASD,CAED,cAAeZ,CAAAA,GAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useHistory } from \"react-router-dom\";\nimport { AuthContext } from \"./libs/Auth\";\n\n// Navbar\nimport NavbarAuth from './containers/NavbarAuth';\nimport NavbarNotAuth from './containers/NavbarNotAuth';\n\n// Routes\nimport Routes from \"./Routes\";\n\n// Styling\nimport \"./App.css\"; \n\n\nfunction App() {\n  const existingTokens = JSON.parse(localStorage.getItem(\"tokens\"));\n  const [authTokens, setAuthTokens] = useState(existingTokens);\n  const history = useHistory();\n\n  useEffect(() => {\n  }, []);\n\n  async function handleLogout() {\n    setAuthTokens();\n    localStorage.clear();\n    history.push(\"/login\");\n  }\n\n  const setTokens = (data) => {\n    localStorage.setItem(\"tokens\", JSON.stringify(data));\n    setAuthTokens(data);\n  }\n\n  return (\n    <div className=\"App\">\n      { authTokens ? <NavbarAuth handleLogout={handleLogout}/> : <NavbarNotAuth/> }\n\n      <AuthContext.Provider value={{ authTokens, setAuthTokens: setTokens }}>\n        <Routes />\n      </AuthContext.Provider>\n    </div>\n  );\n}\n\nexport default App;\n\n"]},"metadata":{},"sourceType":"module"}